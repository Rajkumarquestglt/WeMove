{"version":3,"sources":["http/index.js","hoc/SetTokenHeader/SetTokenHeader.js","views/admin/Promocodes/Promocodes.jsx"],"names":["SetTokenInterval","Component","axios","props","useState","interceptors","request","use","config","configObject","headers","Authorization","localStorage","getItem","interceptor","useEffect","eject","SetTokenHeader","mounted","setMounted","setSearchFlag","tableFilter","setTableFilter","useSelector","state","promocode","promocodes","allData","list","totalRecords","errorMsg","dispatch","useDispatch","getData","columnName","orderBy","search","skip","limit","setTableFilters","getAllPromocodeSaga","tableFields","displayName","key","isConditional","positiveValue","negativeValue","isDate","noSort","isStatus","action","data","editPromocodeStatusSaga","id","status","isActions","actions","view","className","aria-hidden","to","tableData","pageCount","count","linkPropsName","val","initialSortColumnName"],"mappings":"mIAAA,gD,6DC6BeA,IA1Bf,SAA0BC,EAAWC,GAwBnC,OAvBA,SAA0BC,GAAO,MAETC,mBACpBF,EAAMG,aAAaC,QAAQC,KAAI,SAAAC,GAC7B,IAAMC,EAAeD,EAIrB,OAHAC,EAAaC,QAAQC,cAArB,iBAA+CC,aAAaC,QAAb,cAGxCJ,MANJK,EAFwB,oBAiB/B,OANAC,qBAAU,WACR,OAAO,WACLb,EAAMG,aAAaC,QAAQU,MAAMF,MAElC,IAGD,oCACE,kBAACb,EAAcE,O,qHCgIRc,uBA3II,SAAAd,GAAU,IAAD,EACIC,oBAAS,GADb,mBACnBc,EADmB,KACVC,EADU,OAGUf,oBAAS,GAHnB,mBAGPgB,GAHO,aAIYhB,mBAAS,IAJrB,mBAInBiB,EAJmB,KAINC,EAJM,OAiBtBC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,aAjBL,IAcxBC,WAAoBC,EAdI,EAcVC,KAAeC,EAdL,EAcKA,aAE7BC,EAhBwB,EAgBxBA,SAGIC,EAAWC,cAEXC,EAAU,SAACC,EAAYC,EAASC,EAAQC,EAAMC,IAhB5B,SAACJ,EAAYC,EAASC,EAAQC,EAAMC,GAC1DjB,EAAYa,WAAaA,EACzBb,EAAYc,QAAUA,EACtBd,EAAYe,OAASA,EACrBf,EAAYgB,KAAOA,EACnBhB,EAAYiB,MAAQA,EACpBhB,EAAeD,GAWfkB,CAAgBL,EAAYC,EAASC,EAAQC,EAAMC,GAEjDP,EADEK,GAAmB,IAATC,EAEVG,aAAoB,CAAEN,aAAYC,UAASC,SAAQC,KAAM,EAAGC,UAI5DE,aAAoB,CAAEN,aAAYC,UAASC,SAAQC,OAAMC,YAK/DvB,qBAAU,WAGR,OAFAI,GAAW,GACXc,EAAQ,OAAQ,MAAO,GAAI,EAAG,IACvB,kBAAMd,GAAW,MACvB,IAEH,IAIMsB,EAAc,CAClB,CACEC,YAAa,cACbC,IAAK,QAEP,CACED,YAAa,cACbC,IAAK,SACLC,eAAe,EACfC,cAAe,OACfC,cAAe,cAEjB,CACEJ,YAAa,qBACbC,IAAK,oBAEP,CACED,YAAa,eACbC,IAAK,eAEP,CACED,YAAa,aACbC,IAAK,YACLI,QAAQ,GAEV,CACEL,YAAa,WACbC,IAAK,UACLI,QAAQ,GAEV,CACEL,YAAa,SACbC,IAAK,SACLK,QAAQ,EACRC,UAAU,EACVJ,eAAe,EACfK,OAxCiB,SAAAC,GACnBpB,EAASqB,aAAwB,CAAEC,GAAIF,EAAKE,GAAIC,OAAQH,EAAKG,YAyC7D,CACEZ,YAAa,UACbM,QAAQ,EACRO,WAAW,EACXC,QAAS,CACP,CACEC,KAAM,uBAAGC,UAAU,eAAeC,cAAY,SAC9CT,OAAQ,yCAYhB,OACE,yBAAKQ,UAAU,2BACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,2CACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,eACb,6CAEF,yBAAKA,UAAU,4BACb,kBAAC,IAAD,CACEE,GAAG,oCACHF,UAAU,iCAFZ,eAOF,yBAAKA,UAAU,cAAcL,GAAG,oBAC9B,kBAAC,IAAD,CACE3C,QAAS+B,EACToB,UAAWlC,GAAW,KACtBmC,UAAS,OAAEjC,QAAF,IAAEA,OAAF,EAAEA,EAAckC,MACzB9B,QAASA,EACT+B,cAAc,MACd5C,cA9BS,SAAA6C,GACnB/C,GACFE,EAAc6C,IA6BFnC,SAAUA,GAAY,aACtBoC,sBAAsB,iBAYEhE","file":"static/js/92.58c327a7.chunk.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\r\nimport axios from './axios/axios_main';\r\n\r\nexport { axios };\r\n","import React, { useState, useEffect } from 'react';\r\n// import { AuthenticationContext } from \"../../contexts\";\r\n\r\nfunction SetTokenInterval(Component, axios) {\r\n  function WrappedComponent(props) {\r\n    // const authContext = useContext(AuthenticationContext);\r\n    const [interceptor] = useState(\r\n      axios.interceptors.request.use(config => {\r\n        const configObject = config;\r\n        configObject.headers.Authorization = `Bearer ${localStorage.getItem(\r\n          `authToken`,\r\n        )}`;\r\n        return configObject;\r\n      }),\r\n    );\r\n    useEffect(() => {\r\n      return () => {\r\n        axios.interceptors.request.eject(interceptor);\r\n      };\r\n    }, []);\r\n\r\n    return (\r\n      <>\r\n        <Component {...props} />\r\n      </>\r\n    );\r\n  }\r\n  return WrappedComponent;\r\n}\r\nexport default SetTokenInterval;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport SetTokenHeader from '../../../hoc/SetTokenHeader/SetTokenHeader';\r\nimport { axios } from '../../../http';\r\nimport { Table } from '../../../components';\r\nimport {\r\n  getAllPromocodeSaga,\r\n  editPromocodeStatusSaga,\r\n} from '../../../store/actions';\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst Promocodes = props => {\r\n  const [mounted, setMounted] = useState(false);\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [searchFlag, setSearchFlag] = useState(false);\r\n  const [tableFilter, setTableFilter] = useState({});\r\n  const setTableFilters = (columnName, orderBy, search, skip, limit) => {\r\n    tableFilter.columnName = columnName;\r\n    tableFilter.orderBy = orderBy;\r\n    tableFilter.search = search;\r\n    tableFilter.skip = skip;\r\n    tableFilter.limit = limit;\r\n    setTableFilter(tableFilter);\r\n  };\r\n  const {\r\n    promocodes: { list: allData, totalRecords },\r\n    // eslint-disable-next-line no-unused-vars\r\n    errorMsg,\r\n  } = useSelector(state => state.promocode);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const getData = (columnName, orderBy, search, skip, limit) => {\r\n    setTableFilters(columnName, orderBy, search, skip, limit);\r\n    if (search && skip !== 0) {\r\n      dispatch(\r\n        getAllPromocodeSaga({ columnName, orderBy, search, skip: 0, limit }),\r\n      );\r\n    } else {\r\n      dispatch(\r\n        getAllPromocodeSaga({ columnName, orderBy, search, skip, limit }),\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    getData('code', 'asc', '', 0, 10);\r\n    return () => setMounted(false);\r\n  }, []);\r\n\r\n  const statusAction = data => {\r\n    dispatch(editPromocodeStatusSaga({ id: data.id, status: data.status }));\r\n  };\r\n\r\n  const tableFields = [\r\n    {\r\n      displayName: 'Coupon Code',\r\n      key: 'code',\r\n    },\r\n    {\r\n      displayName: 'Coupon Type',\r\n      key: 'isFlat',\r\n      isConditional: true,\r\n      positiveValue: 'Flat',\r\n      negativeValue: 'Percentage',\r\n    },\r\n    {\r\n      displayName: 'Minimum Cart Value',\r\n      key: 'minimumCartValue',\r\n    },\r\n    {\r\n      displayName: 'Max Discount',\r\n      key: 'maxDiscount',\r\n    },\r\n    {\r\n      displayName: 'Start Date',\r\n      key: 'startDate',\r\n      isDate: true,\r\n    },\r\n    {\r\n      displayName: 'End Date',\r\n      key: 'endDate',\r\n      isDate: true,\r\n    },\r\n    {\r\n      displayName: 'Status',\r\n      key: 'status',\r\n      noSort: true,\r\n      isStatus: true,\r\n      positiveValue: true,\r\n      action: statusAction,\r\n    },\r\n    {\r\n      displayName: 'Actions',\r\n      noSort: true,\r\n      isActions: true,\r\n      actions: [\r\n        {\r\n          view: <i className=\"fa fa-pencil\" aria-hidden=\"true\" />,\r\n          action: '/vendors/promocodes/edit-promocode',\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  const searchFlagSetter = val => {\r\n    if (mounted) {\r\n      setSearchFlag(val);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"wrapper wrapper-content\">\r\n      <div className=\"row\">\r\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\r\n          <div className=\"ibox\">\r\n            <div className=\"ibox-content\">\r\n              <div className=\"box-heading\">\r\n                <h2>Promo Codes </h2>\r\n              </div>\r\n              <div className=\"text-right  d-flex-right\">\r\n                <Link\r\n                  to=\"/vendors/promocodes/add-promocode\"\r\n                  className=\"btn btn-primary m-l-sm m-b-md\"\r\n                >\r\n                  Add Coupon\r\n                </Link>\r\n              </div>\r\n              <div className=\"coman-table\" id=\"owner-detail-btn\">\r\n                <Table\r\n                  headers={tableFields}\r\n                  tableData={allData || null}\r\n                  pageCount={totalRecords?.count}\r\n                  getData={getData}\r\n                  linkPropsName=\"_id\"\r\n                  setSearchFlag={searchFlagSetter}\r\n                  errorMsg={errorMsg || 'Loading...'}\r\n                  initialSortColumnName=\"code\"\r\n                  // pageSizeProp={pageSize}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SetTokenHeader(Promocodes, axios);\r\n"],"sourceRoot":""}